#!/usr/bin/env bash
# shellcheck disable=SC2124,SC2034

set -ueo pipefail

[[ "${LOGGING_IS_LOADED:-0}" -eq 1 ]] && return 0

LOGGING_IS_LOADED=1

readonly \
    REWIND='\r\033[K' \
    BOLD='\033[1m' \
    RED='\033[1;31m' \
    YELLOW='\033[0;33m' \
    GREEN='\033[1;32m' \
    NC='\033[0m'

log::error() {
    echo -e "${REWIND}${RED}ERROR: ${0}:${FUNCNAME[1]}:${NC}" "$@" >&2
    exit 1
}

log::warn() {
    echo -e "${REWIND}${YELLOW}WARNING: ${0}:${FUNCNAME[1]}:${NC}" "$@"
}

log::info() {
    echo -e "${REWIND}${GREEN}INFO: ${0}:${FUNCNAME[1]}:${NC}" "$@"
}

log::not_implemented() {
    local -r TARGET=${1:-${FUNCNAME[1]##*::}}
    log::warn "${TARGET} not yet implemented for ${OS_NAME}:${OS_VERSION}. Skipping!"
}

if [[ "${BASH_SOURCE[0]}" == "$0" ]]; then
    log::error "Execution denied: This script is a library and must be sourced."
fi
