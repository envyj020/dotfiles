# vim: set ft=sh:
# shellcheck disable=SC2155,SC1091

export PYTHONIOENCODING='UTF-8'

export FZF_COMPLETION_TRIGGER='**'

FZF_EXCLUDE_DIRS=(
    .git .svn .idea .vscode node_modules
    target build out dist out-tsc .venv venv
    charts vendor __pycache__
)
export FZF_DEFAULT_COMMAND="rg --files -. --no-ignore-vcs --sort path -g '!{$(printf "%s," "${FZF_EXCLUDE_DIRS[@]}" | sed 's/,$//')}'"
export FZF_DEFAULT_OPTS='--height=40% --layout=reverse --info=inline --border --margin=1 --padding=1'

export LANGUAGE=en_US.UTF-8
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"

export VISUAL=nvim
export EDITOR="$VISUAL"
export TZ="Europe/Madrid"
export TERM=xterm-256color
export MANPAGER='nvim +Man!'
export PAGER=most

export NVIM_COLORSCHEME='catppuccin-mocha'
export STARSHIP_CONFIG="$XDG_CONFIG_HOME/starship/starship.toml"

export BAT_CONFIG_DIR="$XDG_CONFIG_HOME/bat"
export BAT_CONFIG_PATH="$BAT_CONFIG_DIR/bat.conf"

export MOST_EDITOR='nvim +%d %s'
export MOST_INITFILE="$XDG_CONFIG_HOME/most/mostrc"

export EZA_COLUMNS=80
export EZA_ICONS_AUTO=true
export EZA_ICON_SPACING=1

export CONTAINER_ENGINE_PREFERENCE=docker

export LESS='-R -F -X -i'
export LESS_TERMCAP_mb=$'\e[1;35m'
export LESS_TERMCAP_md=$'\e[1;36m'
export LESS_TERMCAP_me=$'\e[0m'
export LESS_TERMCAP_so=$'\e[1;33m'
export LESS_TERMCAP_se=$'\e[0m'
export LESS_TERMCAP_us=$'\e[4;32m'
export LESS_TERMCAP_ue=$'\e[0m'

export WORKSPACE="$HOME/workspace"
export PIPENV_VENV_IN_PROJECT=1
export PYENV_ROOT="$HOME/.pyenv"
export NVM_DIR="$HOME/.nvm"

export PROMPT_DIRTRIM=5
export HISTCONTROL=ignoreboth
export HISTSIZE='32768'
export HISTFILESIZE="${HISTSIZE}"

export RED='\033[1;31m' YELLOW='\033[1;33m' GREEN='\033[1;32m' NC='\033[0m'

[ -s "$HOME/.GITHUB_TOKEN" ] && export GITHUB_TOKEN=$(<"$HOME/.GITHUB_TOKEN")
[ -s "$HOME/.ANTHROPIC_TOKEN" ] && export ANTHROPIC_API_KEY=$(<"$HOME/.ANTHROPIC_TOKEN")
[ -s "$HOME/.GEMINI_TOKEN" ] && export GEMINI_API_KEY=$(<"$HOME/.GEMINI_TOKEN")
[ -s "$HOME/.TINYURL_TOKEN" ] && export TINYURL_TOKEN=$(<"$HOME/.TINYURL_TOKEN")

[ -s "$XDG_DATA_HOME/lscolors.sh" ] && source "$XDG_DATA_HOME/lscolors.sh"

declare -a BIN=(
    "$HOME/bin"
    "$WORKSPACE/bin"
    "$XDG_DATA_HOME/nvim/mason/bin"
    "$XDG_DATA_HOME/bob/nvim-bin"
    "$HOME/.local/bin/go/bin"
    "$HOME/go/bin"
    "$HOME/.local/bin"
    "$HOME/.cargo/bin"
    "$HOME/.krew/bin"
    "$HOME/.rd/bin"
    "$HOME/.asdf/shims"
    "$HOME/.nix-profile"
    "$HOME/.lmstudio/bin"
    "$PYENV_ROOT/bin"
    "/usr/local/bin"
    "/usr/local/sbin"
    "/bin"
    "/usr/bin"
    "/usr/sbin"
    "/sbin"
    "/snap/bin"
    "/var/lib/snapd/snap/bin"
)

export PATH="$(printf "%s:" "${BIN[@]}" | sed 's/:$//')"
unset BIN FZF_EXCLUDE_DIRS
