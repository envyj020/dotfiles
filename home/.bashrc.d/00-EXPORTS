# vim: set ft=sh:
# shellcheck disable=SC2155,SC1091

export LANGUAGE=en_US.UTF-8
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

export XDG_CONFIG_HOME="$HOME/.config"
export XDG_STATE_HOME="$HOME/.local/state"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_BIN_HOME="$HOME/.local/bin"
export XDG_CACHE_HOME="$HOME/.cache"

export VISUAL=nvim
export EDITOR="$VISUAL"
export TERMINAL=alacritty
export TZ="Europe/Madrid"
export TERM=xterm-256color
export MANPAGER='nvim +Man!'
export PAGER=most

export RIPGREP_CONFIG_PATH="$HOME/.ripgreprc"

export NVIM_COLORSCHEME='catppuccin-mocha'
export STARSHIP_CONFIG="$XDG_CONFIG_HOME/starship/starship.toml"

export BAT_CONFIG_DIR="$XDG_CONFIG_HOME/bat"
export BAT_CONFIG_PATH="$BAT_CONFIG_DIR/bat.conf"

export MOST_EDITOR='nvim +%d %s'
export MOST_INITFILE="$XDG_CONFIG_HOME/most/mostrc"

export EZA_COLUMNS=80
export EZA_ICONS_AUTO=true
export EZA_ICON_SPACING=1

export CONTAINER_ENGINE_PREFERENCE=docker

export LESS='-R -F -X -i'
export LESS_TERMCAP_mb=$'\e[1;35m'
export LESS_TERMCAP_md=$'\e[1;36m'
export LESS_TERMCAP_me=$'\e[0m'
export LESS_TERMCAP_so=$'\e[1;33m'
export LESS_TERMCAP_se=$'\e[0m'
export LESS_TERMCAP_us=$'\e[4;32m'
export LESS_TERMCAP_ue=$'\e[0m'

export WORKSPACE="$HOME/workspace"
export PIPENV_VENV_IN_PROJECT=1
export PYENV_ROOT="$HOME/.pyenv"
export NVM_DIR="$HOME/.nvm"

export PYTHONIOENCODING='UTF-8'

export PROMPT_DIRTRIM=5
export HISTCONTROL=ignoreboth
export HISTSIZE='32768'
export HISTFILESIZE="$HISTSIZE"

export FZF_COMPLETION_TRIGGER='**'
export FZF_DEFAULT_OPTS_FILE="$XDG_CONFIG_HOME/fzf/config"

FZF_EXCLUDE_DIRS=(
    .git .svn .idea .vscode node_modules
    target build out dist out-tsc .venv venv
    charts vendor __pycache__
)

export FZF_DEFAULT_COMMAND="rg --files --hidden \
    --no-ignore-vcs --sort path \
    -g '!{$(printf "%s," "${FZF_EXCLUDE_DIRS[@]}" | sed 's/,$//')}'"

export RED='\033[1;31m' YELLOW='\033[1;33m' GREEN='\033[1;32m' NC='\033[0m'

[ -s "$HOME/.GITHUB_TOKEN" ] && export GITHUB_TOKEN=$(<"$HOME/.GITHUB_TOKEN")
[ -s "$HOME/.ANTHROPIC_TOKEN" ] && export ANTHROPIC_API_KEY=$(<"$HOME/.ANTHROPIC_TOKEN")
[ -s "$HOME/.GEMINI_TOKEN" ] && export GEMINI_API_KEY=$(<"$HOME/.GEMINI_TOKEN")
[ -s "$HOME/.TINYURL_TOKEN" ] && export TINYURL_TOKEN=$(<"$HOME/.TINYURL_TOKEN")
[ -s "$HOME/.AVANTE_ANTHROPIC_TOKEN" ] && export AVANTE_ANTHROPIC_API_KEY=$(<"$HOME/.AVANTE_ANTHROPIC_TOKEN")
[ -s "$HOME/.AVANTE_GEMINI_TOKEN" ] && export AVANTE_GEMINI_API_KEY=$(<"$HOME/.AVANTE_GEMINI_TOKEN")

[ -s "$XDG_DATA_HOME/lscolors.sh" ] && source "$XDG_DATA_HOME/lscolors.sh"

ADD_PATH() {
    case ":$PATH:" in
    *":$1:"*) ;;
    *) export PATH="$PATH:$1" ;;
    esac
}

declare -a PATHS=(
    "$HOME/bin"
    "$WORKSPACE/bin"
    "$XDG_BIN_HOME"
    "$XDG_DATA_HOME/nvim/mason/bin"
    "$XDG_DATA_HOME/bob/nvim-bin"
    "$XDG_BIN_HOME/go/bin"
    "$HOME/go/bin"
    "$HOME/.cargo/bin"
    "$HOME/.krew/bin"
    "$HOME/.rd/bin"
    "$HOME/.asdf/shims"
    "$HOME/.nix-profile"
    "$HOME/.lmstudio/bin"
    "$PYENV_ROOT/bin"
)

for BIN in "${PATHS[@]}"; do
    ADD_PATH "$BIN"
done

unset PATHS BIN FZF_EXCLUDE_DIRS
